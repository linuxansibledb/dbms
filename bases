Для создания пользователя используем useradd -m

Для создания пароля используем passwd < username >

Для проверки используем su - username

Зашли? Тогда все норм
Вывод может выглядеть по разному, но суть одна

Делается легко

echo "sshuser ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers
На альте еще хорошо бы добавить юзера wheel
usermod -aG wheel sshuser
Теперь можно зайти под sshuser и попробовать что-нибудь повыполнять от sudo

Пароль спросить не должно

apt update
apt install openssh-server
Потом открываем кофиг /etc/ssh/sshd_config и редактируем

#Port 22 -- раскометрировали, поменяли на 2023
Port 2023

#PasswordAuthentication yes -- раскомментили, заменили на no
PasswordAuthentication no
Сохранились, вышли, перезапустили ssh сервер

systemctl restart sshd

Сбросит по стандартному порту, пошлет далеко и надолго без ключей

apt-get update
apt-get install openssh-server
В альте конфига находится по пути /etc/openssh/sshd_config

В остальном, все дейсвтия полностью аналогичны тому, что на астре

Настройка ssh клиента
Пилить конфигу для ssh клиента будем на уровне системы, чтобы уж точно не докапались

На астре
Идем в /etc/ssh/ssh_config

Снизу прописываем что-то типа

Host <адрес srv1 или srv2>
    Port 2023
Например

Прописывать надо сервера и по адресам, и по всем возможным именам

Далее нужно сгенерировать ключи и пробросить их под пользователя sshuser

ssh-keygen
После того, как ключи сгенерированы -- нужно пробросить их под юзера sshuser

Чтобы не страдать -- временно разрешаем парольную аутентификацию, пробрасываем ключи и запрещаем ее обратно

ssh-copy-id sshuser@10.0.10.10
